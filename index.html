<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KneeCapacity - Recovery Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>üí™ KneeCapacity</h1>
        <div id="streak-display" class="streak-badge">
            <span>Streak:</span>
            <span id="streak-count">0</span>
            <span>üî•</span>
        </div>
    </header>

    <main id="app-content">
        <!-- Home View -->
        <div id="home-view" class="view active">
            
            <!-- Traffic Light Status -->
            <section id="knee-status-card" class="status-card text-center">
                <!-- Populated by app.js based on check-in data -->
            </section>
            
            <!-- Rest Status Card -->
            <section id="rest-status" class="status-card text-center">
                <div class="status-icon">‚úÖ</div>
                <h2>Ready to Train</h2>
                <p>Your connective tissue has recovered</p>
            </section>

            <!-- Session Timer Card -->
            <section class="card">
                <h2>Training Session</h2>
                
                <div class="button-group">
                    <button class="preset-btn" data-duration="300">5 min</button>
                    <button class="preset-btn" data-duration="420">7 min</button>
                    <button class="preset-btn active" data-duration="600">10 min</button>
                </div>

                <div class="timer-display">
                    <span id="timer-minutes">10</span>:<span id="timer-seconds">00</span>
                </div>

                <div class="progress-bar">
                    <div id="timer-progress-fill" class="progress-fill"></div>
                </div>

                <button id="timer-action" class="primary-button">Start Session</button>
                
                <p class="timer-info">Keith Barr: 5-10 min loading + 6-8 hr rest</p>
            </section>

            <!-- Daily Check-In Card -->
            <section class="card">
                <h2>Today's Check-In</h2>
                
                <div class="form-group">
                    <label>Swelling Level</label>
                    <div class="button-group swelling-group">
                        <button class="swelling-btn" data-level="none">None</button>
                        <button class="swelling-btn" data-level="mild">Mild</button>
                        <button class="swelling-btn" data-level="moderate">Moderate</button>
                        <button class="swelling-btn" data-level="severe">Severe</button>
                    </div>
                    <small style="color: #757575; display: block; margin-top: 4px;">
                        None=no swelling | Mild=slight puff | Moderate=visible | Severe=major swelling
                    </small>
                </div>

                <div class="form-group">
                    <label>Pain: <span id="pain-value">0</span>/10</label>
                    <input type="range" id="pain-slider" min="0" max="10" value="0" class="slider">
                    <small style="color: #757575; display: block; margin-top: 4px;">
                        0=none | 3=mild | 5=moderate | 7=bad | 10=worst
                    </small>
                </div>

                <div class="form-group">
                    <label>Activities</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" value="volleyball"> üèê Volleyball
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="peloton"> üö¥ Peloton
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="rowing"> üö£ Rowing
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="walking"> üö∂ Walking/Hiking
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="strength"> üèãÔ∏è Strength Training
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="checkin-notes" rows="3" 
                        placeholder="Knee feel? Any clicking, instability, giving way, or concerns?"></textarea>
                </div>

                <button id="save-checkin" class="primary-button">Save Check-In</button>
            </section>

        </div>

        <!-- Log Exercise View (NEW) -->
        <div id="log-view" class="view">
            <h2>Log Exercise</h2>
            <p class="subtitle">Track individual exercises with sets/reps/time</p>
            
            <div class="form-group">
                <label>Select Exercise</label>
                <select id="exercise-select" class="exercise-select">
                    <option value="">Choose exercise...</option>
                </select>
            </div>

            <div id="exercise-detail-card" class="card" style="display: none;">
                <!-- Populated when exercise selected -->
            </div>

            <div id="exercise-log-form" style="display: none;">
                <div class="card">
                    <h3>Log This Exercise</h3>
                    
                    <div class="form-group">
                        <label>Sets Completed</label>
                        <input type="number" id="sets-completed" min="1" max="10" value="3" class="number-input">
                    </div>

                    <div class="form-group">
                        <label>Reps Per Set</label>
                        <input type="number" id="reps-completed" min="1" max="30" value="10" class="number-input">
                    </div>

                    <div class="form-group" id="hold-time-group">
                        <label>Hold Time (seconds)</label>
                        <input type="number" id="hold-time" min="0" max="120" value="0" class="number-input">
                    </div>

                    <div class="form-group">
                        <label>Weight Used (lbs) - optional</label>
                        <input type="number" id="weight-used" min="0" max="500" value="0" step="5" class="number-input">
                        <small style="color: #757575;">Enter 0 for bodyweight</small>
                    </div>

                    <div class="form-group">
                        <label>How It Felt (RPE 1-10)</label>
                        <input type="range" id="rpe-slider" min="1" max="10" value="5" class="slider">
                        <div style="display: flex; justify-content: space-between; font-size: 12px; color: #757575;">
                            <span>Easy (1)</span>
                            <span id="rpe-value">5</span>
                            <span>Max (10)</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Notes (optional)</label>
                        <textarea id="exercise-notes" rows="2" 
                            placeholder="Any pain? Form issues? Modifications made?"></textarea>
                    </div>

                    <button id="save-exercise" class="primary-button">‚úÖ Log Exercise</button>
                </div>

                <div id="todays-logs" class="card" style="margin-top: 16px;">
                    <h3>Today's Logged Exercises</h3>
                    <div id="todays-exercise-list">
                        <!-- Populated with today's exercises -->
                    </div>
                </div>
            </div>
        </div>

        <!-- History View -->
        <div id="history-view" class="view">
            <h2>Recovery History</h2>
            
            <div class="filter-buttons">
                <button class="filter-btn active" data-days="7">7 Days</button>
                <button class="filter-btn" data-days="14">14 Days</button>
                <button class="filter-btn" data-days="30">30 Days</button>
            </div>

            <div id="history-list"></div>
            <button id="export-data" class="secondary-button">üì§ Export for Specialist</button>
        </div>

        <!-- Exercises View -->
        <div id="exercises-view" class="view">
            <h2>Exercise Library</h2>
            <p class="subtitle">Keith Barr + Specialist Protocols</p>
            
            <!-- Phase Filter -->
            <div class="filter-buttons" style="margin-bottom: 16px;">
                <button class="phase-filter active" data-phase="all">All</button>
                <button class="phase-filter" data-phase="Calm">üü¢ Calm</button>
                <button class="phase-filter" data-phase="Build">üü° Build</button>
                <button class="phase-filter" data-phase="Prime">üî¥ Prime</button>
            </div>

            <div id="exercise-list"></div>
        </div>
    </main>

    <!-- Bottom Navigation (Updated with Log tab) -->
    <nav id="bottom-nav">
        <button class="nav-btn active" data-view="home">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">Home</span>
        </button>
        <button class="nav-btn" data-view="log">
            <span class="nav-icon">üìù</span>
            <span class="nav-label">Log</span>
        </button>
        <button class="nav-btn" data-view="history">
            <span class="nav-icon">üìä</span>
            <span class="nav-label">History</span>
        </button>
        <button class="nav-btn" data-view="exercises">
            <span class="nav-icon">üí™</span>
            <span class="nav-label">Exercises</span>
        </button>
    </nav>

    <script src="exercises.js"></script>
    <script src="data.js"></script>
    <script src="timer.js"></script>
    <script src="app.js"></script>
</body>
</html>
